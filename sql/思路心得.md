

#### 1. 多行多列求最大值

| id   | x    | y    | z    |
| ---- | ---- | ---- | ---- |
| 1    | 1    | 2    | 3    |
| 2    | 4    | 5    | 6    |
| 3    | 7    | 8    | 9    |
| 4    | 10   | 11   | 12   |
|      |      |      |      |

方法一: greatest

```sql
SELECT GREATEST(max(x),max(y),max(z)) max_e
FROM `excise_1-1-1`

```

方法二: 把所有的行变成一列,再用max

```sql
SELECT 
    max(a.m) max_m
from
(
    SELECT x as m FROM `excise_1-1-1` 
    union all
    select y as m from `excise_1-1-1` 
    union all
    select z as m from `excise_1-1-1`
) a -- 把所有的行变成一列
```

方法三: 行分别两两比较, 最后成一列求出最大值

```sql
select max(c.m) max_m
from
(
SELECT (CASE WHEN a.er <= b.z THEN b.z ELSE a.er END ) m
FROM (SELECT id,(CASE WHEN x <= y THEN y ELSE x END) er FROM  `excise_1-1-1`) a
left join `excise_1-1-1` b on a.id = b.id
) c

```

#### 2. 列转行用case when 行转列用union all 

#### 3 order by 按照指定顺序

```sql
方法一: select * from user order by field(roleId,2,3,4,1,5);
方法二: select * from user order by locate(id,'2,3,1,5,4');
```

```sql
SELECT * FROM pet ORDER BY if (species='snake',0,1)desc ,species; -- 把species排了2次,第一次特殊要求排序
SELECT * FROM pet ORDER BY birth IN('1993-02-04','1989-05-13'),birth;
if(isnull(字段名),0,1) desc -- 将空值强制放在最后几行
```



